<!--
Copyright (c) 2015 DudeTeam. All rights reserved.
-->
<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html">
<link rel="import" href="../../dude-style/dude-style.html">
<link rel="import" href="../dude-hierarchy.html">

<dom-module id="demo-wrapper">

    <template>
        <content></content>
    </template>

    <script>
        Polymer({
            is: "demo-wrapper",

            properties: {
                hierarchy: {
                    type: Array,
                    value: [
                        {item: {name: "item1", data: "item1"}},
                        {item: {name: "item2", data: "item2"}},
                        {item: {name: "item3", data: "item3"}},
                        {item: {name: "item4", data: "item4"}},
                        {group: {name: "item5", data: "item5", items: [
                            {item: {name: "item5.1", data: "item5.1"}},
                            {item: {name: "item5.2", data: "item5.2"}},
                            {item: {name: "item5.3", data: "item5.3"}},
                            {item: {name: "item5.4", data: "item5.4"}},
                            {group: {name: "item5.5", data: "item5.5", items: [
                                {item: {name: "item5.5.1", data: "item5.5.1"}},
                                {item: {name: "item5.5.2", data: "item5.5.2"}}
                            ]}}
                        ]}},
                        {group: {name: "empty_folder", data: "empty"}},
                        {item: {name: "item6", data: "item6"}},
                        {item: {name: "item7", data: "item7"}},
                        {group: {name: "test_folder", items: [
                            {item: {name: "first item"}},
                            {item: {name: "item1", data: "item1"}},
                            {item: {name: "item2", data: "item2"}}
                        ]}}
                    ]
                },

                dudeHierarchy: {
                    type: Object,
                    value: new DudeHierarchy()
                }
            },

            behaviors: [Polymer.IronA11yKeysBehavior],

            ready: function () {
                this.keyEventTarget = document.body;
                this.addOwnKeyBinding("up", "_up");
                this.addOwnKeyBinding("down", "_down");
                this.addOwnKeyBinding("right", "_right");
                this.addOwnKeyBinding("left", "_left");
                this.addOwnKeyBinding("enter", "_submit");

                Polymer.dom(this).appendChild(this.dudeHierarchy);

                this.dudeHierarchy.items = this.hierarchy;
                this.dudeHierarchy.addEventListener("dude-hierarchy-item-submit", function (e) {
                    console.log("Submitted: ", e.detail.item && e.detail.item.name);
                });
                this.dudeHierarchy.addEventListener("dude-hierarchy-item-select", function (e) {
                    console.log("Selected: ", e.detail.item && e.detail.item.name);
                });
                this.dudeHierarchy.addEventListener("dude-hierarchy-item-deselect", function (e) {
                    console.log("Deselected: ", e.detail.item && e.detail.item.name);
                });
            },

            _up: function () {
                this.dudeHierarchy.moveUp();
            },

            _down: function () {
                this.dudeHierarchy.moveDown();
            },

            _right: function () {
                this.dudeHierarchy.moveRight();
            },

            _left: function () {
                this.dudeHierarchy.moveLeft();
            },

            _submit: function () {
                this.dudeHierarchy.submit();
            }
        })

    </script>

</dom-module>
