<!--
Copyright (c) 2015 DudeTeam. All rights reserved.
-->
<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html">
<link rel="import" href="../../iron-flex-layout/classes/iron-flex-layout.html">
<link rel="import" href="../../dude-style/dude-style.html">
<link rel="import" href="../dude-hierarchy.html">

<dom-module id="demo-wrapper">
    <style>
        #screen {
            background: var(--dude-primary-background-color);
        }
        .panel {
            background: var(--dude-secondary-background-color);
            padding: 10px;
            margin: 10px;
        }
        #otherBlock {
            height: 100px;
            background: red;
        }
    </style>

    <template>
        <div id="screen" class="layout horizontal fit">
            <div class="panel flex">
                <dude-hierarchy id="hierarchyItems" items="{{ items }}"></dude-hierarchy>
            </div>
            <div class="panel flex">
                <dude-hierarchy id="hierarchyResources"
                                items="{{ resources }}"
                                editable
                                on-dude-hierarchy-add-item="_addResource">
                </dude-hierarchy>
            </div>
            <div class="panel flex">
                <div id="otherBlock">
                    OTHER BLOCK
                </div>
            </div>
        </div>
    </template>

    <script>
        Polymer({
            is: "demo-wrapper",

            properties: {
                items: {
                    type: Array,
                    value: [
                        {item: {name: "item1", data: "item1"}},
                        {item: {name: "ééàt", data: "item1"}},
                        {item: {name: "item2", data: "item2"}},
                        {item: {name: "item3", data: "item3"}},
                        {item: {name: "item4", data: "item4"}},
                        {group: {name: "item5", data: "item5", items: [
                            {item: {name: "item5.1", data: "item5.1"}},
                            {item: {name: "item5.2", data: "item5.2"}},
                            {item: {name: "item5.3", data: "item5.3"}},
                            {item: {name: "itém5.4", data: "item5.4"}},
                            {group: {name: "item5.5", data: "item5.5", items: [
                                {item: {name: "item5.5.1", data: "item5.5.1"}},
                                {item: {name: "item5.5.2", data: "item5.5.2"}}
                            ]}}
                        ]}},
                        {group: {name: "Empty_folder", data: "empty"}},
                        {item: {name: "item6", data: "item6"}},
                        {item: {name: "item7", data: "item7"}},
                        {group: {name: "test_folder", items: [
                            {item: {name: "First item"}},
                            {item: {name: "item1", data: "item1"}},
                            {item: {name: "item2", data: "item2"}}
                        ]}}
                    ]
                },
                resources: {
                    type: Array,
                    value: [
                        {item: {name: "test.png", data: "test.png"}},
                        {item: {name: "test.mp3", data: "test.mp3"}}
                    ]
                }
            },

            behaviors: [Polymer.IronA11yKeysBehavior],

            ready: function () {
                this.$.hierarchyItems.addEventListener("dude-hierarchy-item-submit", function (e) {
                    console.log("Submitted: ", e.detail.item && e.detail.item.name);
                });
                this.$.hierarchyItems.addEventListener("dude-hierarchy-item-select", function (e) {
                    console.log("Selected: ", e.detail.item && e.detail.item.name);
                });
                this.$.hierarchyItems.addEventListener("dude-hierarchy-item-deselect", function (e) {
                    console.log("Deselected: ", e.detail.item && e.detail.item.name);
                });
                this.$.otherBlock.addEventListener("dude-hierarchy-drop-outside", function (e) {
                    console.log("drop outside hierarchy: ", e.detail.element && e.detail.x && e.detail.y);
                });
            },

            _addResource: function () {
                this.push("resources", {"item": {"name": "added_resource.png"}});
                this.$.hierarchyResources.focus();
            }

        });

    </script>

</dom-module>
